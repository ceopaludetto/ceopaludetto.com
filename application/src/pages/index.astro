---
import { getCollection } from "astro:content";
import { format } from "date-fns";

import Base from "~/layouts/base.astro";
import { sortByDate } from "~/utilities/date";

const posts = (await getCollection("posts", ({ data }) => import.meta.env.DEV || !data.draft))
	.sort(sortByDate);
---

<Base title="ceo â€” A blog by Carlos Paludetto" color="#0ea5e9">
	<main class="max-w-[70ch] mx-auto p-8 gap-y-10 flex flex-col">
		<div class="flex flex-col gap-y-6">
			{posts.map((entry) => (
				<a class="inline-flex flex-col group" href={`/${entry.id}`}>
					<span class="group-hover:text-primary text-headline-medium font-serif mb-1">{entry.data.title}</span>
					<span class="text-label-large text-on-surface-variant">{format(entry.data.date, "MMMM d, yyyy")}</span>
				</a>
			))}
		</div>
	</main>
</Base>
